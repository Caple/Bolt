<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE project>

<project name="Bolt" default="run" basedir=".">

	<tstamp />
	<property name="version" value="1.0-SNAPSHOT" />

	<target name="run" depends="clean">
		<mkdir dir="dist/" />
		<mkdir dir="dist/bin" />
		<mkdir dir="dist/src" />
		<path id="classpath">
			<fileset dir="lib">
				<include name="**/*.jar" />
			</fileset>
		</path>
		<javac srcdir="src" destdir="dist/bin" classpathref="classpath" includeantruntime="false" debug="true" />
		<copy todir="dist/src">
			<fileset dir="src" />
			<fileset dir="doc/db4oj/core/src" />
		</copy>
		<javadoc sourcepath="dist/src" destdir="dist/jdoc" classpathref="classpath" additionalparam="-quiet">
			<classpath>
				<fileset dir="lib">
					<include name="**/*.jar" />
				</fileset>
				<fileset dir="doc/db4oj/lib">
					<include name="**/*.jar" />
				</fileset>
			</classpath>
		</javadoc>
		<jar jarfile="dist/dependencies.jar">
			<zipgroupfileset dir="lib/">
				<include name="**/*.jar" />
			</zipgroupfileset>
		</jar>
		<jar jarfile="dist/Bolt-${version}.jar">
			<manifest>
				<attribute name="Main-Class" value="pw.caple.bolt.Bolt" />
			</manifest>
			<fileset dir=".">
				<include name="README*" />
				<include name="NOTICE*" />
				<include name="LICENSE*" />
			</fileset>
			<fileset dir="res" />
			<fileset dir="dist/bin" />
			<fileset dir="dist/jdoc" />
			<zipfileset src="dist/dependencies.jar">
				<exclude name="META-INF/**" />
			</zipfileset>
		</jar>
		<delete file="dist/dependencies.jar" />
		<delete dir="dist/bin" />
		<delete dir="dist/src" />
		<delete dir="dist/jdoc" />
	</target>

	<target name="clean">
		<mkdir dir="dist/" />
		<delete includeEmptyDirs="true">
			<fileset dir="dist" includes="**/*" />
		</delete>
	</target>

</project>